/*
  @library      jQuery Treeview Plugin
  @version      1.4
  @author       JÃ¶rn Zaefferer
  @copyright    Copyright (c) 2007
  @website      http://bassistance.de/jquery-plugins/jquery-plugin-treeview/
  @docs         http://docs.jquery.com/Plugins/Treeview

  Dual licensed under the MIT and GPL licenses:
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function(c){c.extend(c.fn,{swapClass:function(b,d){var f=this.filter('.'+b);this.filter('.'+d).removeClass(d).addClass(b);f.removeClass(b).addClass(d);return this},replaceClass:function(b,d){return this.filter('.'+b).removeClass(b).addClass(d).end()},hoverClass:function(b){b=b||"hover";return this.hover(function(){c(this).addClass(b)},function(){c(this).removeClass(b)})},heightToggle:function(b,d){b?this.animate({height:"toggle"},b,d):this.each(function(){c(this)[c(this).is(":hidden")?"show":"hide"]();if(d)d.apply(this,arguments)})},heightHide:function(b,d){if(b){this.animate({height:"hide"},b,d)}else{this.hide();if(d)this.each(d)}},prepareBranches:function(b){if(!b.prerendered){this.filter(":last-child:not(ul)").addClass(a.last);this.filter((b.collapsed?"":"."+a.closed)+":not(."+a.open+")").find(">ul").hide()}return this.filter(":has(>ul)")},applyClasses:function(d,f){this.filter(":has(>ul):not(:has(>a))").find(">span").click(function(b){f.apply(c(this).next())}).add(c("a",this)).hoverClass();if(!d.prerendered){this.filter(":has(>ul:hidden)").addClass(a.expandable).replaceClass(a.last,a.lastExpandable);this.not(":has(>ul:hidden)").addClass(a.collapsable).replaceClass(a.last,a.lastCollapsable);if(!c(this).find('.hitarea').length>0){this.prepend("<div class=\""+a.hitarea+"\"/>").find("div."+a.hitarea).each(function(){var b="";c.each(c(this).parent().attr("class").split(" "),function(){b+=this+"-hitarea "});c(this).addClass(b)})}}this.find("div."+a.hitarea).click(f)},treeview:function(e){e=c.extend({cookieId:"treeview"},e);if(e.add){return this.trigger("add",[e.add])}if(e.toggle){var m=e.toggle;e.toggle=function(){return m.apply(c(this).parent()[0],arguments)}}function n(d,f){function g(b){return function(){h.apply(c("div."+a.hitarea,d).filter(function(){return b?c(this).parent("."+b).length:true}));return false}}c("a:eq(0)",f).click(g(a.collapsable));c("a:eq(1)",f).click(g(a.expandable));c("a:eq(2)",f).click(g())}function h(){c(this).parent().find(">.hitarea").swapClass(a.collapsableHitarea,a.expandableHitarea).swapClass(a.lastCollapsableHitarea,a.lastExpandableHitarea).end().swapClass(a.collapsable,a.expandable).swapClass(a.lastCollapsable,a.lastExpandable).find(">ul").heightToggle(e.animated,e.toggle);if(e.unique){c(this).parent().siblings().find(">.hitarea").replaceClass(a.collapsableHitarea,a.expandableHitarea).replaceClass(a.lastCollapsableHitarea,a.lastExpandableHitarea).end().replaceClass(a.collapsable,a.expandable).replaceClass(a.lastCollapsable,a.lastExpandable).find(">ul").heightHide(e.animated,e.toggle)}}function o(){function f(b){return b?1:0}var g=[];i.each(function(b,d){g[b]=c(d).is(":has(>ul:visible)")?1:0});var k=new Array();k.path='/';c.cookie(e.cookieId,g.join(""),k)}function p(){var f=c.cookie(e.cookieId);if(f){var g=f.split("");i.each(function(b,d){c(d).find(">ul")[parseInt(g[b])?"show":"hide"]()})}}this.addClass("treeview");var i=this.find("li").prepareBranches(e);switch(e.persist){case"cookie":var l=e.toggle;e.toggle=function(){o();if(l){l.apply(this,arguments)}};p();break;case"location":var j=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});if(j.length){j.addClass("selected").parents("ul, li").add(j.next()).show()}break}i.applyClasses(e,h);if(e.control){n(this,e.control);c(e.control).show()}return this.bind("add",function(b,d){c(d).prev().removeClass(a.last).removeClass(a.lastCollapsable).removeClass(a.lastExpandable).find(">.hitarea").removeClass(a.lastCollapsableHitarea).removeClass(a.lastExpandableHitarea);c(d).find("li").andSelf().prepareBranches(e).applyClasses(e,h)})}});var a=c.fn.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"};c.fn.Treeview=c.fn.treeview})(Navigate.jQuery);
