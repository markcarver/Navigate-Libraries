/*
  @library      jQuery Treeview Plugin
  @version      1.5pre
  @author       JÃ¶rn Zaefferer
  @copyright    Copyright (c) 2007
  @website      http://bassistance.de/jquery-plugins/jquery-plugin-treeview/
  @docs         http://docs.jquery.com/Plugins/Treeview

  Dual licensed under the MIT and GPL licenses:
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
  
  Revision: $Id: jquery.treeview.js 5759 2008-07-01 07:50:28Z joern.zaefferer $
*/

(function(c){c.extend(c.fn,{swapClass:function(b,e){var f=this.filter('.'+b);this.filter('.'+e).removeClass(e).addClass(b);f.removeClass(b).addClass(e);return this},replaceClass:function(b,e){return this.filter('.'+b).removeClass(b).addClass(e).end()},hoverClass:function(b){b=b||"hover";return this.hover(function(){c(this).addClass(b)},function(){c(this).removeClass(b)})},heightToggle:function(b,e){b?this.animate({height:"toggle"},b,e):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"]();if(e)e.apply(this,arguments)})},heightHide:function(b,e){if(b){this.animate({height:"hide"},b,e)}else{this.hide();if(e)this.each(e)}},prepareBranches:function(b){if(!b.prerendered){this.filter(":last-child:not(ul)").addClass(a.last);this.filter((b.collapsed?"":"."+a.closed)+":not(."+a.open+")").find(">ul").hide()}return this.filter(":has(>ul)")},applyClasses:function(e,f){this.filter(":has(>ul):not(:has(>a))").find(">span").unbind("click.treeview").bind("click.treeview",function(b){if(this==b.target)f.apply(c(this).next())}).add(c("a",this)).hoverClass();if(!e.prerendered){this.filter(":has(>ul:hidden)").addClass(a.expandable).replaceClass(a.last,a.lastExpandable);this.not(":has(>ul:hidden)").addClass(a.collapsable).replaceClass(a.last,a.lastCollapsable);var g=this.find("div."+a.hitarea);if(!g.length)g=this.prepend("<div class=\""+a.hitarea+"\"/>").find("div."+a.hitarea);g.removeClass().addClass(a.hitarea).each(function(){var b="";c.each(c(this).parent().attr("class").split(" "),function(){b+=this+"-hitarea "});c(this).addClass(b)})}this.find("div."+a.hitarea).click(f)},treeview:function(d){d=c.extend({cookieId:"treeview"},d);if(d.toggle){var l=d.toggle;d.toggle=function(){return l.apply(c(this).parent()[0],arguments)}}function m(e,f){function g(b){return function(){h.apply(c("div."+a.hitarea,e).filter(function(){return b?c(this).parent("."+b).length:true}));return false}}c("a:eq(0)",f).click(g(a.collapsable));c("a:eq(1)",f).click(g(a.expandable));c("a:eq(2)",f).click(g())}function h(){c(this).parent().find(">.hitarea").swapClass(a.collapsableHitarea,a.expandableHitarea).swapClass(a.lastCollapsableHitarea,a.lastExpandableHitarea).end().swapClass(a.collapsable,a.expandable).swapClass(a.lastCollapsable,a.lastExpandable).find(">ul").heightToggle(d.animated,d.toggle);if(d.unique){c(this).parent().siblings().find(">.hitarea").replaceClass(a.collapsableHitarea,a.expandableHitarea).replaceClass(a.lastCollapsableHitarea,a.lastExpandableHitarea).end().replaceClass(a.collapsable,a.expandable).replaceClass(a.lastCollapsable,a.lastExpandable).find(">ul").heightHide(d.animated,d.toggle)}}this.data("toggler",h);function n(){function f(b){return b?1:0}var g=[];i.each(function(b,e){g[b]=c(e).is(":has(>ul:visible)")?1:0});c.cookie(d.cookieId,g.join(""),d.cookieOptions)}function o(){var f=c.cookie(d.cookieId);if(f){var g=f.split("");i.each(function(b,e){c(e).find(">ul")[parseInt(g[b])?"show":"hide"]()})}}this.addClass("treeview");var i=this.find("li").prepareBranches(d);switch(d.persist){case"cookie":var k=d.toggle;d.toggle=function(){n();if(k){k.apply(this,arguments)}};o();break;case"location":var j=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});if(j.length){var p=j.addClass("selected").parents("ul, li").add(j.next()).show();if(d.prerendered){p.filter("li").swapClass(a.collapsable,a.expandable).swapClass(a.lastCollapsable,a.lastExpandable).find(">.hitarea").swapClass(a.collapsableHitarea,a.expandableHitarea).swapClass(a.lastCollapsableHitarea,a.lastExpandableHitarea)}}break}i.applyClasses(d,h);if(d.control){m(this,d.control);c(d.control).show()}return this}});c.treeview={};var a=(c.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"})})(jQuery);
